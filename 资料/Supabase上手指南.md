# Supabaseç»ˆæä¸Šæ‰‹æŒ‡å—

æƒ³æˆä¸ºä¸€åç‹¬ç«‹å¼€å‘è€…ï¼Œå°¤å…¶æ˜¯ä¸“æ³¨äºAIé¢†åŸŸçš„å¼€å‘è€…ï¼Œæˆ‘ä»¬çš„æ ¸å¿ƒç²¾åŠ›åº”è¯¥æ”¾åœ¨ç®—æ³•ã€äº§å“é€»è¾‘å’Œç”¨æˆ·ä½“éªŒä¸Šã€‚åç«¯å¼€å‘çš„ç¹çäº‹åŠ¡â€”â€”å¦‚æ•°æ®åº“ç®¡ç†ã€ç”¨æˆ·è®¤è¯ã€æ–‡ä»¶å­˜å‚¨ç­‰â€”â€”å¾€å¾€ä¼šæ‹–æ…¢æˆ‘ä»¬çš„è„šæ­¥ã€‚Supabaseæ­£æ˜¯è§£å†³è¿™ä¸€ç—›ç‚¹çš„â€œç‘å£«å†›åˆ€â€ã€‚æœ¬æŒ‡å—å°†ç”¨æœ€é€šä¿—çš„è¯­è¨€ï¼Œä¸ºä½ å½»åº•å‰–æSupabaseï¼ŒåŠ©ä½ å¿«é€Ÿä¸Šæ‰‹ï¼Œèµ‹èƒ½ä½ çš„AIé¡¹ç›®ã€‚

## ä¸€ã€ä¸€å¥è¯æ…ç ´å¤©ï¼šSupabaseåˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ

Supabase = ä¸€ä¸ªå¸®ä½ æå®šåç«¯æ‰€æœ‰è„æ´»ç´¯æ´»çš„â€œå…¨å®¶æ¡¶â€æœåŠ¡ã€‚

å®ƒå°†æ•°æ®åº“ã€ç”¨æˆ·è®¤è¯ã€æ–‡ä»¶å­˜å‚¨ã€åç«¯é€»è¾‘ç­‰åŠŸèƒ½æ‰“åŒ…æˆä¸€ä¸ªå¼€ç®±å³ç”¨çš„å¹³å°ã€‚ä½ ä¸å†éœ€è¦è‡ªå·±æ­å»ºå’Œç»´æŠ¤å¤æ‚çš„åç«¯åŸºç¡€è®¾æ–½ï¼Œåªéœ€é€šè¿‡ç®€å•çš„APIè°ƒç”¨ï¼Œå°±èƒ½æ‹¥æœ‰ä¸€ä¸ªå¼ºå¤§ã€å®‰å…¨ä¸”å¯æ‰©å±•çš„åç«¯æ”¯æŒã€‚

ç”±äºå…¶åŠŸèƒ½ä¸Googleçš„Firebaseé«˜åº¦ç›¸ä¼¼ï¼Œä¸”æ ¸å¿ƒåŸºäºå¼€æºæŠ€æœ¯ï¼ŒSupabaseå¸¸è¢«ç§°ä¸º â€œå¼€æºç‰ˆçš„Firebaseâ€ã€‚å®ƒæœ€å¤§çš„ä¼˜åŠ¿æ˜¯å®Œå…¨æ„å»ºåœ¨å¼ºå¤§çš„ PostgreSQL æ•°æ®åº“ä¹‹ä¸Šï¼Œè®©ä½ æ—¢èƒ½äº«å—ç°ä»£åŒ–çš„ä¾¿æ·æœåŠ¡ï¼Œåˆä¸å¤±å…³ç³»å‹æ•°æ®åº“çš„å¼ºå¤§åŠŸèƒ½å’Œçµæ´»æ€§ã€‚

## äºŒã€äº®å…µå™¨ï¼Supabaseçš„æ ¸å¿ƒåŠŸèƒ½

Supabaseçš„é­…åŠ›åœ¨äºå…¶å››å¤§æ ¸å¿ƒåŠŸèƒ½ï¼Œæ¯ä¸ªéƒ½ç›´å‡»ç‹¬ç«‹å¼€å‘è€…çš„ç—›ç‚¹ã€‚

### ğŸš€ 1. æ•°æ®åº“ (Database)

**ç®€ä»‹ï¼š** ä¸€ä¸ªä½ å¯ä»¥å®Œå…¨æŒæ§çš„ã€åŠŸèƒ½å®Œå¤‡çš„PostgreSQLæ•°æ®åº“ã€‚ä½ å¯ä»¥åƒä½¿ç”¨Excelä¸€æ ·ï¼Œåœ¨ç½‘é¡µä¸Šè½»æ¾åˆ›å»ºå’Œç®¡ç†æ•°æ®è¡¨ã€‚

**æ ¸å¿ƒä¼˜åŠ¿ï¼š**

*   **è‡ªåŠ¨ç”ŸæˆAPIï¼š** åªéœ€åœ¨åå°åˆ›å»ºä¸€å¼ è¡¨ï¼ŒSupabaseä¼šç«‹å³ä¸ºä½ ç”Ÿæˆä¸€æ•´å¥—RESTful APIï¼ˆå¢ã€åˆ ã€æ”¹ã€æŸ¥ï¼‰ï¼Œæ— éœ€ç¼–å†™ä»»ä½•åç«¯æ¥å£ä»£ç ã€‚
*   **è¡Œçº§å®‰å…¨ç­–ç•¥ (Row Level Security, RLS)ï¼š** è¿™æ˜¯Supabaseçš„ç²¾é«“ã€‚ä½ å¯ä»¥å®šä¹‰æå…¶ç²¾ç»†çš„æ•°æ®è®¿é—®è§„åˆ™ï¼Œä¾‹å¦‚ï¼šâ€œç”¨æˆ·åªèƒ½è¯»å–å’Œä¿®æ”¹è‡ªå·±åˆ›å»ºçš„æ•°æ®â€ã€â€œä»˜è´¹ä¼šå‘˜æ‰èƒ½è®¿é—®é«˜çº§å†…å®¹â€ã€‚
*   **å®æ—¶ (Realtime) è®¢é˜…ï¼š** å¯ä»¥â€œè®¢é˜…â€æ•°æ®åº“çš„ä»»ä½•å˜åŒ–ã€‚å½“æ•°æ®å‘ç”Ÿå¢ã€åˆ ã€æ”¹æ—¶ï¼Œä½ çš„å‰ç«¯åº”ç”¨èƒ½ç«‹å³æ”¶åˆ°é€šçŸ¥ï¼Œéå¸¸é€‚åˆæ„å»ºå®æ—¶èŠå¤©ã€é€šçŸ¥ã€åä½œç­‰åŠŸèƒ½ã€‚

**AIå¼€å‘åœºæ™¯ï¼š**

*   å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ã€API Keyã€è®¢é˜…çŠ¶æ€ã€‚
*   ä¿å­˜ç”¨æˆ·çš„AIç”Ÿæˆå†å²ï¼Œå¦‚Promptsã€å¯¹è¯è®°å½•ã€å›¾ç‰‡URLç­‰ã€‚
*   ä¸ºRAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰åº”ç”¨æ„å»ºå’Œå­˜å‚¨çŸ¥è¯†åº“æ•°æ®ã€‚

### ğŸ” 2. ç”¨æˆ·è®¤è¯ (Auth)

**ç®€ä»‹ï¼š** ä¸€å¥—å®Œæ•´çš„ã€å³æ’å³ç”¨çš„ç”¨æˆ·èº«ä»½éªŒè¯ç³»ç»Ÿã€‚

**æ ¸å¿ƒä¼˜åŠ¿ï¼š**

*   **å¤šç§ç™»å½•æ–¹å¼ï¼š** å†…ç½®æ”¯æŒé‚®ç®±/å¯†ç ã€æ‰‹æœºéªŒè¯ç ã€é­”æ³•é“¾æ¥ï¼ˆMagic Linkï¼‰ï¼Œå¹¶æ— ç¼é›†æˆäº†Googleã€GitHubã€Appleç­‰æ•°åç§ç¬¬ä¸‰æ–¹OAuthç™»å½•ã€‚
*   **æ— ç¼é›†æˆRLSï¼š** Authç³»ç»Ÿä¸æ•°æ®åº“çš„è¡Œçº§å®‰å…¨ç­–ç•¥å®Œç¾ç»“åˆã€‚ä½ å¯ä»¥è½»æ¾å†™å‡º`auth.uid() = user_id`è¿™æ ·çš„è§„åˆ™ï¼Œç¡®ä¿ç”¨æˆ·æ•°æ®çš„ç»å¯¹éš”ç¦»ä¸å®‰å…¨ã€‚
*   **ä¾¿æ·çš„ç”¨æˆ·ç®¡ç†ï¼š** å¯åœ¨åå°ä»ªè¡¨ç›˜ä¸­æŸ¥çœ‹ã€ç¦ç”¨ã€åˆ é™¤æ‰€æœ‰æ³¨å†Œç”¨æˆ·ã€‚

**AIå¼€å‘åœºæ™¯ï¼š**

*   ä¸ºä½ çš„SaaSåº”ç”¨æä¾›ç”¨æˆ·æ³¨å†Œç™»å½•åŠŸèƒ½ï¼Œä¿æŠ¤ä»˜è´¹å†…å®¹ã€‚
*   ç®¡ç†ä¸åŒç”¨æˆ·çš„AIæœåŠ¡ä½¿ç”¨é¢åº¦ï¼ˆCreditsï¼‰ã€‚
*   è®©ç”¨æˆ·èƒ½å¤Ÿå®‰å…¨åœ°ä¿å­˜å’Œç®¡ç†è‡ªå·±çš„åˆ›ä½œå†å²ã€‚

### ğŸ“¦ 3. æ–‡ä»¶å­˜å‚¨ (Storage)

**ç®€ä»‹ï¼š** ä¸€ä¸ªç”¨äºå­˜å‚¨å’Œç®¡ç†å„ç±»æ–‡ä»¶ï¼ˆå›¾ç‰‡ã€è§†é¢‘ã€PDFç­‰ï¼‰çš„å¯¹è±¡å­˜å‚¨æœåŠ¡ã€‚

**æ ¸å¿ƒä¼˜åŠ¿ï¼š**

*   **å†…ç½®CDNåŠ é€Ÿï¼š** æ‰€æœ‰æ–‡ä»¶è‡ªåŠ¨é€šè¿‡å…¨çƒCDNç½‘ç»œåˆ†å‘ï¼Œç¡®ä¿ç”¨æˆ·åœ¨ä¸–ç•Œä»»ä½•åœ°æ–¹éƒ½èƒ½å¿«é€Ÿè®¿é—®ã€‚
*   **ç²¾ç»†çš„æƒé™ç®¡ç†ï¼š** ä¸æ•°æ®åº“ç±»ä¼¼ï¼Œå¯ä»¥ä¸ºæ–‡ä»¶å’Œæ–‡ä»¶å¤¹è®¾ç½®è¯¦ç»†çš„è®¿é—®ç­–ç•¥ï¼ˆå¦‚å…¬å¼€ã€ç§æœ‰ã€ä»…ç‰¹å®šç”¨æˆ·å¯è®¿é—®ï¼‰ã€‚

**AIå¼€å‘åœºæ™¯ï¼š**

*   å­˜å‚¨ç”¨æˆ·ä¸Šä¼ ç”¨äºAIå¤„ç†çš„åŸå§‹æ–‡ä»¶ï¼ˆå›¾ç‰‡ã€æ–‡æ¡£ã€éŸ³é¢‘ï¼‰ã€‚
*   ä¿å­˜AIç”Ÿæˆçš„å›¾ç‰‡ã€è§†é¢‘ã€PDFæŠ¥å‘Šç­‰ï¼Œå¹¶å°†CDNåŠ é€Ÿåçš„URLè¿”å›ç»™å‰ç«¯ã€‚

### âš¡ï¸ 4. è¾¹ç¼˜å‡½æ•° (Edge Functions)

**ç®€ä»‹ï¼š** å¯æŒ‰éœ€åœ¨äº‘ç«¯è¿è¡Œçš„æœåŠ¡ç«¯ä»£ç ç‰‡æ®µï¼ˆåŸºäºDenoï¼‰ã€‚

**æ ¸å¿ƒä¼˜åŠ¿ï¼š**

*   **å®‰å…¨ï¼š** å°†æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚ç¬¬ä¸‰æ–¹APIå¯†é’¥ï¼‰å’Œæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ç½®äºåç«¯ï¼Œé¿å…åœ¨å‰ç«¯æš´éœ²ã€‚
*   **ä½å»¶è¿Ÿï¼š** å‡½æ•°éƒ¨ç½²åœ¨å…¨çƒè¾¹ç¼˜èŠ‚ç‚¹ï¼Œä¼šè‡ªåŠ¨åœ¨ç¦»ç”¨æˆ·æœ€è¿‘çš„ä½ç½®æ‰§è¡Œï¼Œå“åº”é€Ÿåº¦æå¿«ã€‚
*   **å¤–éƒ¨æœåŠ¡äº¤äº’ï¼š** è¿™æ˜¯è¿æ¥ä½ çš„åº”ç”¨ä¸å¤–éƒ¨AIæœåŠ¡çš„æ¡¥æ¢ã€‚

**AIå¼€å‘åœºæ™¯ï¼š**

*   **ç»å¯¹çš„æ ¸å¿ƒåœºæ™¯ï¼š** åˆ›å»ºä¸€ä¸ªå‡½æ•°æ¥æ¥æ”¶å‰ç«¯çš„è¯·æ±‚ï¼ˆå¦‚Promptï¼‰ï¼Œç„¶ååœ¨å‡½æ•°å†…éƒ¨å®‰å…¨åœ°è°ƒç”¨OpenAIã€Midjourneyç­‰AIæœåŠ¡çš„APIï¼Œå¹¶å°†ç»“æœè¿”å›ã€‚è¿™æ˜¯ä¿æŠ¤ä½ çš„AI API Keyä¸è¢«æ³„éœ²çš„æœ€ä½³å®è·µã€‚
*   å¤„ç†æ”¯ä»˜å›è°ƒï¼ˆå¦‚Stripeã€Lemon Squeezyï¼‰ã€‚
*   è§¦å‘æ•°æ®åº“è§¦å‘å™¨ï¼Œåœ¨æ•°æ®å†™å…¥å‰åæ‰§è¡Œæ•°æ®æ¸…æ´—ã€å‘é‡åŒ–ç­‰è‡ªåŠ¨åŒ–ä»»åŠ¡ã€‚

## ä¸‰ã€AIå¼€å‘è€…çš„å®æˆ˜åœºæ™¯

å°†ä»¥ä¸ŠåŠŸèƒ½ç»„åˆèµ·æ¥ï¼Œä½ çš„AIåº”ç”¨å¼€å‘å°†å˜å¾—å¼‚å¸¸é«˜æ•ˆï¼š

**åœºæ™¯ä¸€ï¼šAIå†™ä½œSaaSå·¥å…·**

*   **Auth** ç®¡ç†ç”¨æˆ·å’Œä¼šå‘˜ç­‰çº§ã€‚
*   **Database** å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ã€å†™ä½œé¢åº¦ã€å†å²æ–‡ç« ï¼ˆç”¨RLSéš”ç¦»æ•°æ®ï¼‰ã€‚
*   **Edge Functions** å®‰å…¨è°ƒç”¨GPT-4 APIï¼Œå¤„ç†é¢åº¦æ‰£å‡å’Œç»“æœä¿å­˜ã€‚

**åœºæ™¯äºŒï¼šAIå›¾ç‰‡ç”Ÿæˆåº”ç”¨**

*   **Auth** æä¾›ç”¨æˆ·ç™»å½•ã€‚
*   **Storage** å­˜å‚¨æ‰€æœ‰AIç”Ÿæˆçš„å›¾ç‰‡ï¼Œå¹¶æä¾›é«˜é€Ÿè®¿é—®URLã€‚
*   **Database** å­˜å‚¨ç”¨æˆ·çš„Promptå†å²å’Œæ”¶è—å¤¹ã€‚
*   **Edge Functions** è°ƒç”¨Stable Diffusionæˆ–Midjourney APIï¼Œç”Ÿæˆå›¾ç‰‡åä¸Šä¼ è‡³Storageï¼Œå†å°†URLå­˜å…¥Databaseã€‚

**åœºæ™¯ä¸‰ï¼šåŸºäºç§æœ‰çŸ¥è¯†åº“çš„AIé—®ç­”æœºå™¨äºº**

*   **Storage** å…è®¸ç”¨æˆ·ä¸Šä¼ PDFã€TXTç­‰æ–‡æ¡£ã€‚
*   **Edge Functions** ç›‘å¬æ–‡ä»¶ä¸Šä¼ ï¼Œè‡ªåŠ¨è¯»å–ã€åˆ†å—å¹¶è°ƒç”¨Embeddingæ¨¡å‹è¿›è¡Œå‘é‡åŒ–ã€‚
*   **Database** (é…åˆ `pgvector` æ’ä»¶) å­˜å‚¨æ–‡æœ¬å—å’Œå¯¹åº”çš„å‘é‡æ•°æ®ã€‚
*   å¦ä¸€ä¸ª **Edge Function** æ¥æ”¶ç”¨æˆ·é—®é¢˜ï¼Œå°†å…¶å‘é‡åŒ–ååœ¨æ•°æ®åº“ä¸­è¿›è¡Œç›¸ä¼¼åº¦æœç´¢ï¼Œå°†æ£€ç´¢åˆ°çš„å†…å®¹ä¸é—®é¢˜ä¸€åŒæäº¤ç»™å¤§è¯­è¨€æ¨¡å‹ç”Ÿæˆç­”æ¡ˆã€‚

## å››ã€æ–°æ‰‹ä¸Šè·¯ä¸‰æ­¥èµ°

Supabaseçš„ä¸Šæ‰‹æ›²çº¿éå¸¸å¹³ç¼“ï¼Œåªéœ€ä¸‰æ­¥å³å¯â€œæ‰“é€šä»»ç£äºŒè„‰â€ã€‚

**æ€æƒ³å‡†å¤‡ (1åˆ†é’Ÿ)ï¼š**
å¿˜æ‰å¯¹åç«¯çš„ææƒ§ã€‚ä½ çš„è§’è‰²æ˜¯â€œAPIè°ƒç”¨å·¥ç¨‹å¸ˆâ€ï¼Œå·¥ä½œæ˜¯â€œæ­ç§¯æœ¨â€è€Œéâ€œç›–æˆ¿å­â€ã€‚

**åˆ›å»ºé¡¹ç›® (5åˆ†é’Ÿ)ï¼š**
è®¿é—® Supabaseå®˜ç½‘ï¼Œç”¨GitHubè´¦å·ç™»å½•å¹¶åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ã€‚åªéœ€è®¾ç½®é¡¹ç›®åç§°å’Œæ•°æ®åº“å¯†ç ï¼Œä¸¤åˆ†é’Ÿåä½ çš„åç«¯å°±å·²å‡†å¤‡å°±ç»ªã€‚

**è·‘é€šç¬¬ä¸€ä¸ªâ€œHello Worldâ€ (15åˆ†é’Ÿ)ï¼š**
å»ºè®®ä»ä¸€ä¸ªç®€å•çš„â€œç•™è¨€æ¿â€å¼€å§‹ã€‚

1.  **åå°å»ºè¡¨ï¼š** åœ¨Databaseä¸­æ–°å»ºä¸€å¼ åä¸º `guestbook` çš„è¡¨ï¼ŒåŒ…å«`content`å’Œ`author`ä¸¤ä¸ª`text`ç±»å‹çš„å­—æ®µã€‚æš‚æ—¶å…³é—­RLSä»¥ä¾¿æµ‹è¯•ã€‚
2.  **è·å–å¯†é’¥ï¼š** åœ¨ Project Settings > API ä¸­ï¼Œå¤åˆ¶ä½ çš„Project URLå’Œanon publicå¯†é’¥ã€‚
3.  **å‰ç«¯ç¼–ç ï¼š** åœ¨ä¸€ä¸ªç®€å•çš„HTMLæ–‡ä»¶ä¸­ï¼Œå¼•å…¥Supabaseçš„JSåº“å¹¶åˆå§‹åŒ–å®¢æˆ·ç«¯ã€‚

```html
<!-- 1. å¼•å…¥JSåº“ -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
  // 2. åˆå§‹åŒ–å®¢æˆ·ç«¯
  const SUPABASE_URL = 'ä½ çš„é¡¹ç›®URL';
  const SUPABASE_ANON_KEY = 'ä½ çš„anon publicå¯†é’¥';
  const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

  // 3. å°è¯•æ’å…¥å’Œè¯»å–æ•°æ®
  async function addAndReadMessage() {
    // æ’å…¥æ•°æ®
    const { error: insertError } = await supabase
      .from('guestbook')
      .insert({ content: 'Hello Supabase!', author: 'AI Dev' });
    if (insertError) console.error('æ’å…¥å¤±è´¥:', insertError);

    // è¯»å–æ•°æ®
    let { data: messages, error: selectError } = await supabase.from('guestbook').select('*');
    if (selectError) console.error('è¯»å–å¤±è´¥:', selectError);
    else console.log('æˆåŠŸè¯»å–ç•™è¨€:', messages);
  }

  addAndReadMessage();
</script>
```

å½“ä½ åœ¨æµè§ˆå™¨æ§åˆ¶å°çœ‹åˆ°æˆåŠŸè¯»å–çš„æ•°æ®æ—¶ï¼Œä½ å·²ç»æŒæ¡äº†Supabaseæœ€æ ¸å¿ƒçš„ç”¨æ³•ã€‚

## äº”ã€ç»™AIç‹¬ç«‹å¼€å‘è€…çš„å¿ å‘Š

*   **å–„ç”¨å…è´¹å¥—é¤ï¼š** Supabaseçš„å…è´¹é¢åº¦è¶³ä»¥æ”¯æ’‘ç»å¤§å¤šæ•°åº”ç”¨çš„å¼€å‘ã€æµ‹è¯•å’Œå°æµé‡è¿è¥é˜¶æ®µã€‚
*   **å®‰å…¨ç¬¬ä¸€ï¼š** æ°¸è¿œä¸è¦å°†`service_role`å¯†é’¥ï¼ˆçº¢è‰²çš„ã€secretçš„å¯†é’¥ï¼‰æš´éœ²åœ¨å‰ç«¯ã€‚æ‰€æœ‰æ•æ„Ÿæ“ä½œå¿…é¡»åœ¨Edge Functionsä¸­å®Œæˆã€‚
*   **æ‹¥æŠ±ç¤¾åŒºï¼š** Supabaseæ‹¥æœ‰æ´»è·ƒçš„å¼€å‘è€…ç¤¾åŒºï¼Œé‡åˆ°é—®é¢˜å¯ä»¥å»å®˜æ–¹GitHub Discussionsæˆ–Discordå¯»æ±‚å¸®åŠ©ã€‚

ç°åœ¨ï¼Œè¡ŒåŠ¨èµ·æ¥ï¼Œå»åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªSupabaseé¡¹ç›®å§ï¼å½“ä½ äº²æ‰‹å®Œæˆç¬¬ä¸€ä¸ªæ•°æ®äº¤äº’æ—¶ï¼Œä½ ä¼šçœŸæ­£ä½“ä¼šåˆ°å®ƒä¸ºç‹¬ç«‹å¼€å‘è€…å¸¦æ¥çš„è‡ªç”±ä¸æ•ˆç‡ã€‚